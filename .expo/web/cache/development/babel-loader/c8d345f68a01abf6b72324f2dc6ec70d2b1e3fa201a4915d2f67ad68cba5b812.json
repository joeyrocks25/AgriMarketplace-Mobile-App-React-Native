{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useState } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport * as Yup from \"yup\";\nimport { Form, FormField, FormPicker as Picker, SubmitButton } from \"../components/forms\";\nimport CategoryPickerItem from \"../components/CategoryPickerItem\";\nimport Screen from \"../components/Screen\";\nimport FormImagePicker from \"../components/forms/FormImagePicker\";\nimport listingsApi from \"../api/listings\";\nimport useLocation from \"../hooks/useLocation\";\nimport UploadScreen from \"./UploadScreen\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar validationSchema = Yup.object().shape({\n  title: Yup.string().required().min(1).label(\"Title\"),\n  price: Yup.number().required().min(1).max(10000).label(\"Price\"),\n  description: Yup.string().label(\"Description\"),\n  category: Yup.object().required().nullable().label(\"Category\"),\n  images: Yup.array().min(0, \"Please select at least one image.\")\n});\nvar categories = [{\n  backgroundColor: \"#fc5c65\",\n  icon: \"floor-lamp\",\n  label: \"Furniture\",\n  value: 1\n}, {\n  backgroundColor: \"#fd9644\",\n  icon: \"car\",\n  label: \"Cars\",\n  value: 2\n}, {\n  backgroundColor: \"#fed330\",\n  icon: \"camera\",\n  label: \"Cameras\",\n  value: 3\n}, {\n  backgroundColor: \"#26de81\",\n  icon: \"cards\",\n  label: \"Games\",\n  value: 4\n}, {\n  backgroundColor: \"#2bcbba\",\n  icon: \"shoe-heel\",\n  label: \"Clothing\",\n  value: 5\n}, {\n  backgroundColor: \"#45aaf2\",\n  icon: \"basketball\",\n  label: \"Sports\",\n  value: 6\n}, {\n  backgroundColor: \"#4b7bec\",\n  icon: \"headphones\",\n  label: \"Movies & Music\",\n  value: 7\n}, {\n  backgroundColor: \"#a55eea\",\n  icon: \"book-open-variant\",\n  label: \"Books\",\n  value: 8\n}, {\n  backgroundColor: \"#778ca3\",\n  icon: \"application\",\n  label: \"Other\",\n  value: 9\n}];\nfunction ListingEditScreen() {\n  var location = useLocation();\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    uploadVisible = _useState2[0],\n    setUploadVisible = _useState2[1];\n  var _useState3 = useState(0),\n    _useState4 = _slicedToArray(_useState3, 2),\n    progress = _useState4[0],\n    setProgress = _useState4[1];\n  var handleSubmit = function () {\n    var _ref2 = _asyncToGenerator(function* (listing, _ref) {\n      var resetForm = _ref.resetForm;\n      setProgress(0);\n      setUploadVisible(true);\n      var result = yield listingsApi.addListing(_objectSpread(_objectSpread({}, listing), {}, {\n        location: location\n      }), function (progress) {\n        return setProgress(progress);\n      });\n      console.log(result);\n      if (!result.ok) {\n        setUploadVisible(false);\n        return alert(\"Could not save the listing\");\n      }\n      resetForm();\n    });\n    return function handleSubmit(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsxs(Screen, {\n    style: styles.container,\n    children: [_jsx(UploadScreen, {\n      onDone: function onDone() {\n        return setUploadVisible(false);\n      },\n      progress: progress,\n      visible: uploadVisible\n    }), _jsxs(Form, {\n      initialValues: {\n        title: \"\",\n        price: \"\",\n        description: \"\",\n        category: null,\n        images: []\n      },\n      onSubmit: handleSubmit,\n      validationSchema: validationSchema,\n      children: [_jsx(FormImagePicker, {\n        name: \"images\"\n      }), _jsx(FormField, {\n        maxLength: 255,\n        name: \"title\",\n        placeholder: \"Title\"\n      }), _jsx(FormField, {\n        keyboardType: \"numeric\",\n        maxLength: 8,\n        name: \"price\",\n        placeholder: \"Price\",\n        width: 120\n      }), _jsx(Picker, {\n        items: categories,\n        name: \"category\",\n        numberOfColumns: 3,\n        PickerItemComponent: CategoryPickerItem,\n        placeholder: \"Category\",\n        width: \"50%\"\n      }), _jsx(FormField, {\n        maxLength: 255,\n        multiline: true,\n        name: \"description\",\n        numberOfLines: 3,\n        placeholder: \"Description\"\n      }), _jsx(SubmitButton, {\n        title: \"Post\"\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    padding: 10\n  }\n});\nexport default ListingEditScreen;","map":{"version":3,"names":["React","useState","StyleSheet","Yup","Form","FormField","FormPicker","Picker","SubmitButton","CategoryPickerItem","Screen","FormImagePicker","listingsApi","useLocation","UploadScreen","jsx","_jsx","jsxs","_jsxs","validationSchema","object","shape","title","string","required","min","label","price","number","max","description","category","nullable","images","array","categories","backgroundColor","icon","value","ListingEditScreen","location","_useState","_useState2","_slicedToArray","uploadVisible","setUploadVisible","_useState3","_useState4","progress","setProgress","handleSubmit","_ref2","_asyncToGenerator","listing","_ref","resetForm","result","addListing","_objectSpread","console","log","ok","alert","_x","_x2","apply","arguments","style","styles","container","children","onDone","visible","initialValues","onSubmit","name","maxLength","placeholder","keyboardType","width","items","numberOfColumns","PickerItemComponent","multiline","numberOfLines","create","padding"],"sources":["C:/Users/kpfb2/Desktop/AM2 - Copy (2)/app/screens/ListingEditScreen.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { StyleSheet } from \"react-native\";\nimport * as Yup from \"yup\";\n\nimport {\n  Form,\n  FormField,\n  FormPicker as Picker,\n  SubmitButton,\n} from \"../components/forms\";\nimport CategoryPickerItem from \"../components/CategoryPickerItem\";\nimport Screen from \"../components/Screen\";\nimport FormImagePicker from \"../components/forms/FormImagePicker\";\nimport listingsApi from \"../api/listings\";\nimport useLocation from \"../hooks/useLocation\";\nimport UploadScreen from \"./UploadScreen\";\n\nconst validationSchema = Yup.object().shape({\n  title: Yup.string().required().min(1).label(\"Title\"),\n  price: Yup.number().required().min(1).max(10000).label(\"Price\"),\n  description: Yup.string().label(\"Description\"),\n  category: Yup.object().required().nullable().label(\"Category\"),\n  images: Yup.array().min(0, \"Please select at least one image.\"),\n});\n\nconst categories = [\n  {\n    backgroundColor: \"#fc5c65\",\n    icon: \"floor-lamp\",\n    label: \"Furniture\",\n    value: 1,\n  },\n  {\n    backgroundColor: \"#fd9644\",\n    icon: \"car\",\n    label: \"Cars\",\n    value: 2,\n  },\n  {\n    backgroundColor: \"#fed330\",\n    icon: \"camera\",\n    label: \"Cameras\",\n    value: 3,\n  },\n  {\n    backgroundColor: \"#26de81\",\n    icon: \"cards\",\n    label: \"Games\",\n    value: 4,\n  },\n  {\n    backgroundColor: \"#2bcbba\",\n    icon: \"shoe-heel\",\n    label: \"Clothing\",\n    value: 5,\n  },\n  {\n    backgroundColor: \"#45aaf2\",\n    icon: \"basketball\",\n    label: \"Sports\",\n    value: 6,\n  },\n  {\n    backgroundColor: \"#4b7bec\",\n    icon: \"headphones\",\n    label: \"Movies & Music\",\n    value: 7,\n  },\n  {\n    backgroundColor: \"#a55eea\",\n    icon: \"book-open-variant\",\n    label: \"Books\",\n    value: 8,\n  },\n  {\n    backgroundColor: \"#778ca3\",\n    icon: \"application\",\n    label: \"Other\",\n    value: 9,\n  },\n];\n\nfunction ListingEditScreen() {\n  const location = useLocation();\n  const [uploadVisible, setUploadVisible] = useState(false);\n  const [progress, setProgress] = useState(0);\n\n  const handleSubmit = async (listing, { resetForm }) => {\n    setProgress(0);\n    setUploadVisible(true);\n    const result = await listingsApi.addListing(\n      { ...listing, location },\n      (progress) => setProgress(progress)\n    );\n\n    console.log(result); // Add this line to see the response from the server\n\n    if (!result.ok) {\n      setUploadVisible(false);\n      return alert(\"Could not save the listing\");\n    }\n\n    resetForm();\n  };\n\n  return (\n    <Screen style={styles.container}>\n      <UploadScreen\n        onDone={() => setUploadVisible(false)}\n        progress={progress}\n        visible={uploadVisible}\n      />\n      <Form\n        initialValues={{\n          title: \"\",\n          price: \"\",\n          description: \"\",\n          category: null,\n          images: [],\n        }}\n        onSubmit={handleSubmit}\n        validationSchema={validationSchema}\n      >\n        <FormImagePicker name=\"images\" />\n        <FormField maxLength={255} name=\"title\" placeholder=\"Title\" />\n        <FormField\n          keyboardType=\"numeric\"\n          maxLength={8}\n          name=\"price\"\n          placeholder=\"Price\"\n          width={120}\n        />\n        <Picker\n          items={categories}\n          name=\"category\"\n          numberOfColumns={3}\n          PickerItemComponent={CategoryPickerItem}\n          placeholder=\"Category\"\n          width=\"50%\"\n        />\n        <FormField\n          maxLength={255}\n          multiline\n          name=\"description\"\n          numberOfLines={3}\n          placeholder=\"Description\"\n        />\n        <SubmitButton title=\"Post\" />\n      </Form>\n    </Screen>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    padding: 10,\n  },\n});\nexport default ListingEditScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}